$.fn.cndkbeforeafter=function(e){var l=$.extend({mode:"hover",showText:!0,beforeText:"BEFORE",beforeTextPosition:"bottom-left",afterText:"AFTER",afterTextPosition:"bottom-right",seperatorWidth:"4px",seperatorOpacity:"0.8",theme:"light",autoSliding:!1,autoSlidingStopOnHover:!0,hoverEffect:!0,enterAnimation:!1},e),t=this,e=new Image;e.src=$(this).find(">div").eq(0).find('div[data-type="before"] img').attr("src"),e.onload=function(){var k;(k=t).each(function(){var e=$(this).find(">div>div").length;e<=1&&console.log("(cndk.beforeafter.js) Error ->Â No before-after images found."),k.addClass("cndkbeforeafter-theme-"+l.theme);var t,r,f,a,d=$(this);for(d.addClass("cndkbeforeafter cndkbeforeafter-root"),d.append("<div class='cndkbeforeafter-seperator' style='width:"+l.seperatorWidth+";opacity:"+l.seperatorOpacity+"'></div>"),d.append("<div class='cndkbeforeafter-container'></div>"),1==l.hoverEffect&&d.addClass("cndkbeforeafter-hover"),1==l.showText&&(t=null==$(this).find(">div").eq(0).find('div[data-type="before"]').attr("data-title")?l.beforeText:$(this).find(">div").eq(0).find('div[data-type="before"]').attr("data-title"),r=null==$(this).find(">div").eq(0).find('div[data-type="after"]').attr("data-title")?l.afterText:$(this).find(">div").eq(0).find('div[data-type="after"]').attr("data-title"),d.append("<div class='cndkbeforeafter-item-before-text cndkbeforeafter-"+l.beforeTextPosition+"'>"+t+"</div>"),d.append("<div class='cndkbeforeafter-item-after-text cndkbeforeafter-"+l.afterTextPosition+"'>"+r+"</div>")),i=0;i<e;i++){var n=$(this).find(">div").eq(i).find('div[data-type="before"]'),o=$(this).find(">div").eq(i).find('div[data-type="before"] img');o.addClass("cndkbeforeafter-item-before"),n.addClass("cndkbeforeafter-item-before-c"),n.css("overflow","hidden"),n.css("z-index","2");var s=$(this).find(">div").eq(i).find('div[data-type="after"]'),c=$(this).find(">div").eq(i).find('div[data-type="after"] img');c.addClass("cndkbeforeafter-item-after"),s.addClass("cndkbeforeafter-item-after-c"),s.css("z-index","1");var b=o.width(),h=o.height(),m=$(this).parent().width();m<b&&(h/=b/m,b=m,o.css("width",b+"px"),c.css("width",b+"px")),$(this).find(">div").eq(0).addClass("cndkbeforeafter-item"),$(this).find(">div").eq(0).css("height",h+"px"),b<200&&($(this).find(".cndkbeforeafter-item-after-text").addClass("cndkbeforeafter-extra-small-text cndkbeforeafter-extra-small-text-after"),$(this).find(".cndkbeforeafter-item-before-text").addClass("cndkbeforeafter-extra-small-text cndkbeforeafter-extra-small-text-before")),n.css("width","50%"),s.css("width","50%"),$(".cndkbeforeafter-seperator").css("left","50%"),d.css("width",b+"px"),d.css("height",h+"px")}"hover"==l.mode?($(d).find(".cndkbeforeafter-seperator, .cndkbeforeafter-item > div").addClass("cndkbeforeafter-hover-transition"),$(d).mousemove(function(e){var t=$(this).offset(),t=100*parseInt(e.pageX-t.left)/parseInt(d.width());$(this).find(".cndkbeforeafter-item-before-c").css("width",t+"%"),$(this).find(".cndkbeforeafter-item-after-c").css("width",100-t+"%"),$(this).find(".cndkbeforeafter-seperator").css("left",t+"%")}).mouseleave(function(){$(this).find(".cndkbeforeafter-item-after-c").css("width","50%"),$(this).find(".cndkbeforeafter-item-before-c").css("width","50%"),$(this).find(".cndkbeforeafter-seperator").css("left","50%")})):"drag"==l.mode&&($(d).find(".cndkbeforeafter-seperator, .cndkbeforeafter-item > div").addClass("cndkbeforeafter-drag-transition"),$(d).click(function(e){var t=$(this).offset(),t=100*parseInt(e.pageX-t.left)/parseInt(d.width());$(this).find(".cndkbeforeafter-item-before-c").css("width",t+"%"),$(this).find(".cndkbeforeafter-item-after-c").css("width",100-t+"%"),$(this).find(".cndkbeforeafter-seperator").css("left",t+"%")}),f=!1,(a=d).find(".cndkbeforeafter-seperator").on("mousedown",function(e){f=!0,a.find(".cndkbeforeafter-seperator, .cndkbeforeafter-item > div").removeClass("cndkbeforeafter-drag-transition"),a.mousemove(function(e){var t;f&&(t=a.offset(),t=100*parseInt(e.pageX-t.left)/parseInt(d.width()),a.find(".cndkbeforeafter-item-before-c").css("width",t+"%"),a.find(".cndkbeforeafter-item-after-c").css("width",100-t+"%"),a.find(".cndkbeforeafter-seperator").css("left",t+"%"))})}),a.find(".cndkbeforeafter-seperator").on("mouseup",function(e){f=!1,a.find(".cndkbeforeafter-seperator, .cndkbeforeafter-item > div").addClass("cndkbeforeafter-drag-transition")}),a.find(".cndkbeforeafter-seperator").on("touchstart",function(e){f=!0,a.find(".cndkbeforeafter-seperator, .cndkbeforeafter-item > div").removeClass("cndkbeforeafter-drag-transition"),a.on("touchmove",function(e){var t=a.offset(),t=100*parseInt(e.originalEvent.touches[0].pageX-t.left)/parseInt(d.width());a.find(".cndkbeforeafter-item-before-c").css("width",t+"%"),a.find(".cndkbeforeafter-item-after-c").css("width",100-t+"%"),a.find(".cndkbeforeafter-seperator").css("left",t+"%")})}),a.find(".cndkbeforeafter-seperator").append("<div><span></span></div>")),l.enterAnimation&&$(this).addClass("cndkbeforeafter-animation"),l.autoSliding&&($(this).attr("auto-sliding","true"),$(this).find(".cndkbeforeafter-item-before-c").addClass("cndkbeforeafter-animation-item-1"),$(this).find(".cndkbeforeafter-item-after-c").addClass("cndkbeforeafter-animation-item-2"),$(this).find(".cndkbeforeafter-seperator").addClass("cndkbeforeafter-animation-seperator"),l.autoSlidingStopOnHover&&($(this).on("mouseenter",function(){$(this).find(".cndkbeforeafter-item-before-c").removeClass("cndkbeforeafter-animation-item-1"),$(this).find(".cndkbeforeafter-item-after-c").removeClass("cndkbeforeafter-animation-item-2"),$(this).find(".cndkbeforeafter-seperator").removeClass("cndkbeforeafter-animation-seperator")}),$(this).on("mouseleave",function(){$(this).find(".cndkbeforeafter-item-before-c").addClass("cndkbeforeafter-animation-item-1"),$(this).find(".cndkbeforeafter-item-after-c").addClass("cndkbeforeafter-animation-item-2"),$(this).find(".cndkbeforeafter-seperator").addClass("cndkbeforeafter-animation-seperator")}))),$(window).resize(function(){})})}};